yum install -y rpmdevtools gcc make automake yum-utils

adduser builder
passwd builder

ssh builder

sudo su - builder

rpmdev-setuptree

rpm -Uvh http://nginx.org/packages/rhel/7/SRPMS/nginx-1.10.1-1.el7.ngx.src.rpm


wget -O master.zip https://github.com/kvspb/nginx-auth-ldap/archive/master.zip

unzip master.zip
mv nginx-auth-ldap-master/ nginx-auth-ldap-0.1
tar cfz nginx-auth-ldap-0.1.tar.gz nginx-auth-ldap-0.1
mv nginx-auth-ldap-0.1.tar.gz  ~/rpmbuild/SOURCES/
rm -rf master.zip nginx-auth-ldap-0.1/

vi ~/rpmbuild/SPECS/nginx.spec
  Source14: nginx-auth-ldap-0.1.tar.gz

  %{__tar} zxvf %{SOURCE14}
  %setup -T -D -a 14

%build
./configure %{COMMON_CONFIGURE_ARGS} \
    --with-cc-opt="%{WITH_CC_OPT}" \
    --add-module=%{_builddir}/%{name}-%{main_version}/nginx-auth-ldap-0.1

yum install -y createrepo
yum install -y openssl-devel
  408  yum install -y perl-devel
  409  yum install -y perl-ExtUtils-Embed
  410  yum install -y GeoIP-devel
  411  yum install -y zlib-devel
  412  yum install -y pcre-devel
  413  yum install -y libxslt-devel
  414  yum install -y gd-devel
  415  yum install -y openldap-devel

sudo rpm -i nginx-1.10.1-1.el7.centos.ngx.x86_64.rpm
sudo cp *.rpm /usr/share/nginx/html/

createrepo /usr/share/nginx/html
createrepo --update /usr/share/nginx/html

systemctl start nginx

vi /etc/yum.repos.d/zolti.repo

[zolti]
name=zolti
baseurl=http://127.0.0.1
gpgcheck=0

yum repo-pkgs zolti list

yum --enablerepo=zolti install nginx-debuginfo


https://cyberpersons.com/2017/07/12/how-to-create-yum-repository-in-centos-7/
https://access.redhat.com/sites/default/files/attachments/rh_yum_cheatsheet_1214_jcs_print-1.pdf
https://www.tekovic.com/adding-custom-modules-to-nginx-rpm
http://h4cktheworld.blogspot.ru/2015/04/nginx-163-ngxpostgres-ngxlua-rpm.html
